#include<stdio.h>
#include<string.h>

void genS(int N){

    int magicS[N][N];
    memset(magicS, 0, sizeof(magicS));

    int i = N / 2;
    int j = N - 1;
    int C = 8;     //задаем число с которого нужно начать
    for (int num = C; num <= N * N + C; ){
        if (i == -1 && j == N){
            j = N - 2;
            i = 0;
        } else{
            if (j == N){
                j = 0;
            }
            if (i < 0){
                i = N - 1;
            }
        }
        if (magicS[i][j]){
            j -= 2;
            i++;
            continue;
        } else{
            magicS[i][j] = num++;
        }
            j++; 
            i--;
        
    }
    for (i = 0; i < N; i++){
        for (j = 0; j < N; j++){
            printf("%3d ", magicS[i][j]);
        }
        printf("\n");
    }
}


int main(){
    int N = 5; // n должно быть нечетным
    genS (N);
    return 0;
}
